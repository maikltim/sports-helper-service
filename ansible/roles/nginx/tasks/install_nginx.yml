# task  for install nginx

- name: Add entry to /etc/hosts
  lineinfile:
    path: /etc/hosts
    line: '192.168.57.3 {{ backend_name }}'

- name: Install epel-release repository (for extra packages)
  yum:
    name: epel-release
    state: present

- name: Install Nginx
  yum:
    name: nginx
    state: present

- name: mkdir for ssl
  file:
    path: "/etc/nginx/ssl"
    state: directory

- name: Copy certs
  copy: src={{ item }} dest="/etc/nginx/ssl"
  loop:
      - "mycert.crt"
      - "mycert.key"

- name: Start Nginx service
  service:
    name: nginx
    state: started
    enabled: yes  # Ensure Nginx starts on boot

